STACKSG SEGMENT PARA STACK 'STACK'
  DB 64 DUP(?)
STACKSG ENDS

DATA SEGMENT PARA 'DATA'
  MYSTR DB 'ABCDEFGHIJKLMNOPQRST$'
DATA ENDS

CODE SEGMENT PARA 'CODE'
  ASSUME CS:CODE, DS:DATA, SS:STACKSG

ENTRY PROC
  PUSH DS
  PUSH AX 
  MOV AX, DATA
  MOV DS, AX

  LEA DX, MYSTR
  MOV AH, 09h
  INT 21h

  MOV DL, 0Dh
  MOV AH, 02h
  INT 21h
  MOV DL, 0Ah
  MOV AH, 02h
  INT 21h

  MOV CX, 7
OUTER_LOOP:
  PUSH CX

  MOV SI, OFFSET MYSTR
  ADD SI, 4

  MOV AL, [SI]
  PUSH AX

  MOV CX, 6
INNER_LOOP:
  MOV AL, [SI + 2]
  MOV [SI], AL
  ADD SI, 2
  LOOP INNER_LOOP

  POP AX
  MOV SI, OFFSET MYSTR
  ADD SI, 16
  MOV [SI], AL

  LEA DX, MYSTR
  MOV AH, 09h
  INT 21h

  MOV DL, 0Dh
  MOV AH, 02h
  INT 21h
  MOV DL, 0Ah
  MOV AH, 02h
  INT 21h

  POP CX
  LOOP OUTER_LOOP

  POP AX
  POP DS
  MOV AH, 4Ch
  INT 21h

ENTRY ENDP
CODE ENDS
END ENTRY
